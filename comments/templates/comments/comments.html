  
<!DOCTYPE html>
<!-- Comment body based off bootstrap snippet: 
https://bootsnipp.com/snippets/g68X5

and

https://bootsnipp.com/snippets/ZkexO
-->
<HTML lang="en">



<body>
<div class= container>

	<div class="post-comments">



			    <!-- first comment -->
				<h2 class = "engirls_font_large">{{ comments.paginator.count }} Comments </h2>

				{% if comments %}
					{% for comment in comments %}
						<div class = "row">
						  	<div class="media">

						  	<div class= container>		    
						  		<div class = "row">
								    <div class="media-heading">
								      <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> 
								      	{{ comment.created_on|date:"d-m-Y" }} by: {{ comment.user.first_name }}
								      <span class="badge badge-primary">Likes - TODO</span>
								    </div>
							    </div> 


							    <div class = "row">
								    <div class="media-body">
									    <p> {{ comment.body }} </p>

									    <div class="comment-meta">
									        <span><a href="#">delete</a></span>
									        <a class="" role="button" data-toggle="collapse" href="#replyCommentt" aria-expanded="false" aria-controls="collapseExample">reply</a>
									    </div>
								    </div>
								</div>

								<div class = "row">

									<div class = "replies">
										<input type="hidden" id="replies_id_{{ comment.pk }}" name = "name_replies_input" value="{{ comment.pk }}">
										<div name = "name_replies_load"></div>
									</div>

								</div>

							</div>
						     <!-- media -->
						    </div>


						<!-- row -->
						</div>   
					{% endfor %}

				{% else %}
					<h1 class = "engirls_font_large" >Start a conversation? </h1>  	
				{% endif %}


	<!-- post container -->
	</div>


	<div class = row>
		<div class= "col-sm-3">
			<ul class="pagination">
				{% if comments.paginator.num_pages > 1 %}
					<div class = "col-xs-1 col-md-2 col-lg-3 engirls_font_norm">
						#
					</div>
					{% for num in comments.paginator.page_range %}
						<div class = "col-xs-1 col-md-2 col-lg-3 engirls_font_norm">
						{% if comments.number == num %}
							<!-- <button class="button-submit pagination_submit btn-outline-light btn-sm"> {{ num }}</button> -->
							 <a class="text-primary my_pagination_submit" href="#" > {{ num }} </a> 
						{% else %}
							<!-- <button class="button-submit pagination_submit btn-outline-dark btn-sm"> {{ num }}</button> -->
							<a class="text-secondary my_pagination_submit"  href = "#">{{ num }}</a> 
						{% endif %}
						</div>
					{% endfor %}
				{% endif %}
			</ul>

	</div>	

<!-- end container -->
</div>




</body>

<script type="text/javascript">
$(".my_pagination_submit").on('click', function(e) {
    e.preventDefault();
    page_num = $.trim($(this).text());
    render_comment_list(page_num);

      return false;
  });

/*
	Fire Ajax get request to comments/view_conversations/num
*/
function render_replies_list(comment_pk){
  	
  	var replies_id = "#replies_id_" + comment_pk;
	$(replies_id).load('comments/view_conversations/' + comment_pk);
	alert("We loaded shit");
}

// Post and render the comment list upon clickin the post comment button
/*
$("#post_comment").on('click', function(e) {
    e.preventDefault();
    var form = $(this).closest("form");
     $.ajax({
            url: '/comments/comics/{{ comic_panel.pk }}/1/',
            type: 'POST',
            data: form.serialize()
        }).done(function(data) {
          $('#id_body').val('');
          render_comment_list();
        });
      return false;
  });


$(document).ready(function(){
  render_comment_list();
});
*/
$(document).ready(function(){
  $( ".replies" ).each(function( i ) {
  	
  	// Grab Comment pk from replies elements
    var reply_input = $(this).find("input[name='name_replies_input']");
    var comment_pk = reply_input.val();
    alert(comment_pk);
    reply_input.next().load('comments/view_conversations/' + comment_pk);

  });


});


</script>

